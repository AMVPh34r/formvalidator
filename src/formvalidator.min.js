function FormTextField(e,t,n){this.element=e;this.matches=t.matches||this.element;this.validator=n;this.regex={Length:/^[.]/g,Letters:/[^a-zA-Z]/g,UpperCase:/[^A-Z]/g,LowerCase:/[^a-z]/g,Nums:/[^0-9]/g,Symbols:/[^!@#:\$%\^\&*\)\(+=_-]/g};this.reqs={minLength:0,maxLength:-1,minLetters:0,maxLetters:-1,minUpperCase:0,maxUpperCase:-1,minLowerCase:0,maxLowerCase:-1,minNums:0,maxNums:-1,minSymbols:0,maxSymbols:-1,matches:this.matches.name};this.msgs={minLength:"This field must contain at least {minLength} character{s-minLength}.",maxLength:"This field cannot contain more than {maxLength} character{s-maxLength}.",minLetters:"This field must contain at least {minLetters} letter{s-minLetters}.",maxLetters:"This field cannot contain more than {maxLetters} letter{s-maxLetters}.",minUpperCase:"This field must contain at least {minUpperCase} uppercase letter{s-minUpperCase}.",maxUpperCase:"This field cannot contain more than {maxUpperCase} uppercase letter{s-maxUpperCase}.",minLowerCase:"This field must contain at least {minLowerCase} lowercase letter{s-minLowerCase}.",maxLowerCase:"This field cannot contain more than {maxLowerCase} lowercase letter{s-maxLowerCase}.",minNums:"This field must contain at least {minNums} digit{s-minNums}.",maxNums:"This field cannot contain more than {maxNums} digit{s-maxNums}.",minSymbols:"This field must contain at least {minSymbols} of the following: !@#$%^&*)(+=._-:",maxSymbols:"This field cannot contain more than {maxSymbols} of the following: !@#$%^&*)(+=._-:",matches:"This field must match the {matches} field."};this.validator.log("Loaded form text field '"+this.element.name+"'");for(var r in t){if(typeof t[r]=="number"&&this.reqs[r]!==undefined&&t[r]>=0)this.reqs[r]=t[r];else if(typeof t[r]=="string"&&r.indexOf("Msg")>=0&&this.msgs[r.replace("Msg","")]!==undefined)this.msgs[r.replace("Msg","")]=t[r];else this.element[r]=t[r];this.validator.log(this.element.name+": Loaded option '"+r+"' ("+t[r]+")")}}function FormRadioButton(e,t,n){this.element=e;this.validator=n;this.settings={required:false,requiredMsg:"Please select an option"};this.validator.log("Loaded radio button set '"+this.element.item(0).name+"'");for(var r in t){if(r in this.settings)this.settings[r]=t[r];else this.element[r]=t[r];this.validator.log(this.element.item(0).name+": Loaded option '"+r+"' ("+t[r]+")")}}function FormCheckbox(e,t,n){this.element=e;this.validator=n;this.reqs={required:false,minSelect:0,maxSelect:-1};this.msgs={required:"Please select this checkbox.",minSelect:"You must select at least {minSelect} option{s-minSelect}.",maxSelect:"You cannot select more than {maxSelect} option{s-maxSelect}."};this.validator.log("Loaded form checkbox set '"+this.element.item(0).name+"'");for(var r in t){if(r in this.reqs)this.reqs[r]=t[r];else if(r.indexOf("Msg")>=0&&this.msgs[r.replace("Msg","")]!==undefined)this.msgs[r.replace("Msg","")]=t[r];else this.element[r]=t[r];this.validator.log(this.element.item(0).name+": Loaded option '"+r+"' ("+t[r]+")")}}function FormSelect(e,t,n){this.element=e;this.matches=t.matches||this.element;this.validator=n;this.reqs={minVal:0,maxVal:-1};this.msgs={minVal:"The selected value is too low.",maxVal:"The selected value is too high."};for(var r in t){if(r in this.reqs)this.reqs[r]=t[r];else if(r.indexOf("Msg")>=0&&this.msgs[r.replace("Msg","")]!==undefined)this.msgs[r.replace("Msg","")]=t[r];else this.element[r]=t[r]}}function FormValidator(e,t){this.element=e;this.state=3;this.items=[];for(var o in t){if(!this.element[o]){console.log("Unknown type: "+o)}else if(this.element[o].type=="text"||this.element[o].type=="email"||this.element[o].type=="url"||this.element[o].type=="password"||this.element[o].type=="textarea"){this.items.push(new FormTextField(this.element[o],t[o],this))}else if(this.element[o].item(0).type=="radio"){this.items.push(new FormRadioButton(this.element[o],t[o],this))}else if(this.element[o].item(0).type=="checkbox"){this.items.push(new FormCheckbox(this.element[o],t[o],this))}else if(this.element[o].type=="select-one"){this.items.push(new FormSelect(this.element[o],t[o],this))}else{console.log("Unknown error for "+o)}}}FormTextField.prototype.getSettings=function(){return{reqs:this.reqs,msgs:this.msgs}};FormTextField.prototype.parseMsg=function(e){var t=this;var n=this.msgs[e].replace(/\{([a-zA-Z\-]*)\}/g,function(e,n){if(n in t.reqs)return t.reqs[n];if(n.indexOf("s-")===0)return t.reqs[n.substr(2)]>1?"s":""});this.validator.log(this.element.name+": Parsed message '"+e+"' as \""+n+'"');return n};FormTextField.prototype.validate=function(){var e=this.element.value;this.element.setCustomValidity("");if(!this.element.checkValidity()){this.validator.log(this.element.name+": HTML5 validation failed.");return false}for(var t in this.regex){var n=e.replace(this.regex[t],"");if(n.length<this.reqs["min"+t]){this.validator.log(this.element.name+": "+t+" is too small (min "+this.reqs["min"+t]+")");this.element.setCustomValidity(this.parseMsg("min"+t));return false}if(n.length>this.reqs["max"+t]&&this.reqs["max"+t]>-1){this.validator.log(this.element.name+": "+t+" is too large (max "+this.reqs["max"+t]+")");this.element.setCustomValidity(this.parseMsg("max"+t));return false}}if(e!=this.matches.value){this.validator.log(this.element.name+": Value does not match required field '"+this.matches.name+"'");this.element.setCustomValidity(this.parseMsg("matches"));return false}return true};FormRadioButton.prototype.setValidity=function(e){for(var t=0;t<this.element.length;t++){this.element.item(t).setCustomValidity(e)}};FormRadioButton.prototype.validate=function(){this.setValidity("");if(!this.settings.required)return true;for(var e=0;e<this.element.length;e++){if(this.element.item(e).checked)return true}this.validator.log(this.element.item(0).name+": Required button not selected.");this.setValidity(this.settings.requiredMsg);return false};FormCheckbox.prototype.parseMsg=function(e){var t=this;var n=this.msgs[e].replace(/\{([a-zA-Z\-]*)\}/g,function(e,n){if(n in t.reqs)return t.reqs[n];if(n.indexOf("s-")===0)return t.reqs[n.substr(2)]>1?"s":""});this.validator.log(this.element.item(0).name+": Parsed message '"+e+"' as \""+n+'"');return n};FormCheckbox.prototype.setValidity=function(e){for(var t=0;t<this.element.length;t++){this.element.item(t).setCustomValidity(e)}};FormCheckbox.prototype.validate=function(){this.setValidity("");var e=0;for(var t=0;t<this.element.length;t++){var n=this.element.item(t);if(n.checked){e++}else{if(typeof this.reqs.required=="string"&&this.reqs.required==n.id){this.validator.log(this.element.item(0).name+": Required checkbox '"+this.reqs.required+"' not selected");n.setCustomValidity(this.parseMsg("required"));return false}else if(typeof this.reqs.required=="object"){for(var r=0;r<this.reqs.required.length;r++){if(this.reqs.required[r]==n.id){this.validator.item(0).log(this.element.name+": Required checkbox '"+this.reqs.required[r]+"' not selected");n.setCustomValidity(this.parseMsg("required"));return false}}}}}if(e<this.reqs.minSelect){this.validator.log(this.element.item(0).name+": Number of checked boxes is too small (min "+this.reqs["minSelect"]+")");this.setValidity(this.parseMsg("minSelect"));return false}if(this.reqs.maxSelect>=0&&e>this.reqs.maxSelect){this.validator.log(this.element.item(0).name+": Number of checked boxes is too large (max "+this.reqs["maxSelect"]+")");this.setValidity(this.parseMsg("maxSelect"));return false}return true};FormSelect.prototype.parseMsg=function(e){var t=this;var n=this.msgs[e].replace(/\{([a-zA-Z\-]*)\}/g,function(e,n){if(n in t.reqs)return t.reqs[n];if(n.indexOf("s-")===0)return t.reqs[n.substr(2)]>1?"s":""});this.validator.log(this.element.name+": Parsed message '"+e+"' as \""+n+'"');return n};FormSelect.prototype.validate=function(){this.element.setCustomValidity("");if(this.element.required&&this.element.value===""){this.element.setCustomValidity("Please select an item in the list.");return false}if(this.element.value<this.reqs.minVal){this.element.setCustomValidity(this.parseMsg("minVal"));return false}if(this.reqs.maxVal>=0&&this.element.value>this.reqs.maxVal){this.element.setCustomValidity(this.parseMsg("maxVal"));return false}return true};FormValidator.prototype.log=function(e,t){t=t||0;if(this.state<=t)console.log(e)};FormValidator.prototype.validate=function(){for(var e in this.items){if(!this.items[e].validate())return false}return true};FormValidator.prototype.getItems=function(){items=[];for(var e in this.items)items.push(this.items[e].element);return items}